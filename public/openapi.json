{
  "openapi": "3.1.0",
  "info": {
    "title": "Cloudflare AI Agent Platform API",
    "description": "This API provides a single WebSocket endpoint to interact with the DynamicAgent, which in turn orchestrates tasks across a suite of specialist agents (GitHub, Debugger, BestPractices).",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "wss://your-worker-url.workers.dev",
      "description": "Production WebSocket endpoint"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "summary": "Establish a WebSocket connection",
        "description": "Upgrades the HTTP connection to a WebSocket to begin interacting with the DynamicAgent. All subsequent communication occurs over this WebSocket.",
        "responses": {
          "101": {
            "description": "Switching Protocols. The connection is now a WebSocket."
          },
          "426": {
            "description": "Upgrade Required. The server requires a WebSocket connection."
          }
        }
      }
    }
  },
  "components": {
      "schemas": {
          "ClientMessage": {
              "type": "object",
              "properties": {
                  "agent": {"type": "string", "enum": ["GITHUB_AGENT", "DEBUGGER_AGENT", "BEST_PRACTICES_AGENT"]},
                  "tool": {"type": "string", "description": "The name of the tool to invoke on the specialist agent."},
                  "params": {"type": "object", "description": "An object containing the parameters for the tool."}
              },
              "required": ["agent", "tool", "params"]
          },
          "ServerMessage": {
              "type": "object",
              "properties": {
                  "type": {"type": "string", "enum": ["status", "result", "error"]},
                  "message": {"type": "string", "description": "A status update or error message."},
                  "tool": {"type": "string", "description": "The tool that produced the result."},
                  "result": {"type": "object", "description": "The JSON result from the tool invocation."}
              }
          }
      }
  }
}